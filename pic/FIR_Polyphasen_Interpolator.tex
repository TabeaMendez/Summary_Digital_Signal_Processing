% 
% (c) Copyright 2016 Tabea Mendez
% 
% This source is free: you can redistribute it and/or modify
% it under the terms of the GNU General Public License as published by
% the Free Software Foundation, either version 3 of the License, or
% (at your option) any later version.
% 
% This source is distributed in the hope that it will be useful,
% but WITHOUT ANY WARRANTY; without even the implied warranty of
% MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
% GNU General Public License for more details.
% 
% You should have received a copy of the GNU General Public License
% along with this source.  If not, see <http://www.gnu.org/licenses/>.
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{tikzpicture}[>=latex', scale=1.1]
\def\s{0.3};
\def\l{1.4};
\def\dh{0.8};
\def\dv{1};

		\draw[line width=1](-\l+0.5*\dh,0)--node[above]{\footnotesize$x(n)$}node[below]{\footnotesize$f_s$}++(\l,0)--++(0,-14.4);
		\coordinate (m) at (0.5*\dh,-4.6+1.5);
		\draw[line width=1,fill=white](m)++(-\s,-\s)--++(2*\s,0)--++(0,2*\s)--++(-2*\s,0)--cycle node at(m)[xshift=0pt]{\small$z^{\text{-}1}$};
		\coordinate (m) at (0.5*\dh,-9.5+1.5);
		\draw[line width=1,fill=white](m)++(-\s,-\s)--++(2*\s,0)--++(0,2*\s)--++(-2*\s,0)--cycle node at(m)[xshift=0pt]{\small$z^{\text{-}1}$};
		\coordinate (m) at (0.5*\dh,-14.4+1.5);
		\draw[line width=1,fill=white](m)++(-\s,-\s)--++(2*\s,0)--++(0,2*\s)--++(-2*\s,0)--cycle node at(m)[xshift=0pt]{\small$z^{\text{-}1}$};

		\draw[line width=1,->,CadetRed](0.5*\dh,0)--++(1*\dh,0)node[xshift=-1.5cm,yshift=-1cm]{\Large$\ast$};
		\draw[line width=1,->,blueT](0.5*\dh,-4.6)--++(1*\dh,0)node[xshift=-1.5cm]{\Large$\ast$};
		\draw[line width=1,->,greenT](0.5*\dh,-9.5)--++(1*\dh,0)node[xshift=-1.5cm]{\Large$\ast$};
		\draw[line width=1,->,orangeT](0.5*\dh,-14.4)--++(1*\dh,0)node[xshift=-1.5cm]{\Large$\ast$};

		\draw[line width=1,CadetRed](1.5*\dh,0)--(3.5*\dh,1.75\dv)--++(0.5*\dh,0);
		\draw[line width=1,CadetRed](1.5*\dh,0)--(3.5*\dh,-4.6+1.75\dv)--++(0.5*\dh,0);
		\draw[line width=1,CadetRed](1.5*\dh,0)--(3.5*\dh,-9.5+1.75\dv)--++(0.5*\dh,0);
		\draw[line width=1,CadetRed](1.5*\dh,0)--(3.5*\dh,-14.4+1.75\dv)--++(0.5*\dh,0);

		\draw[line width=1,blueT](1.5*\dh,-4.6)--(3.5*\dh,0.75\dv)--++(0.5*\dh,0);
		\draw[line width=1,blueT](1.5*\dh,-4.6)--(3.5*\dh,-4.6+0.75\dv)--++(0.5*\dh,0);
		\draw[line width=1,blueT](1.5*\dh,-4.6)--(3.5*\dh,-9.5+0.75\dv)--++(0.5*\dh,0);
		\draw[line width=1,blueT](1.5*\dh,-4.6)--(3.5*\dh,-14.4+0.75\dv)--++(0.5*\dh,0);

		\draw[line width=1,greenT](1.5*\dh,-9.5)--(3.5*\dh,-0.5\dv)--++(0.5*\dh,0);
		\draw[line width=1,greenT](1.5*\dh,-9.5)--(3.5*\dh,-4.6-0.5\dv)--++(0.5*\dh,0);
		\draw[line width=1,greenT](1.5*\dh,-9.5)--(3.5*\dh,-9.5-0.5\dv)--++(0.5*\dh,0);
		\draw[line width=1,greenT](1.5*\dh,-9.5)--(3.5*\dh,-14.4-0.5\dv)--++(0.5*\dh,0);

		\draw[line width=1,orangeT](1.5*\dh,-14.4)--(3.5*\dh,-1.75\dv)--++(0.5*\dh,0);
		\draw[line width=1,orangeT](1.5*\dh,-14.4)--(3.5*\dh,-4.6-1.75\dv)--++(0.5*\dh,0);
		\draw[line width=1,orangeT](1.5*\dh,-14.4)--(3.5*\dh,-9.5-1.75\dv)--++(0.5*\dh,0);
		\draw[line width=1,orangeT](1.5*\dh,-14.4)--(3.5*\dh,-14.4-1.75\dv)--++(0.5*\dh,0);

		\draw[line width=2,white,dashed, dash pattern=on 3pt off 3pt](0.5*\dh,0)++(0,-5.4)--++(0,-1.5);
		\draw[line width=2,white,dashed, dash pattern=on 3pt off 3pt](0.5*\dh,0)++(0,-10.3)--++(0,-1.5);

	% Erste Abteilung	
	\begin{scope}[yshift=0cm]

		\coordinate (np) at (0,0);
		\draw[line width=1](np)++(4*\dh+2*\s,1.75\dv)--++(1*\dh,0)--++(0.5*\dh,-1.75\dv);
		\draw[line width=1](np)++(4*\dh+2*\s,0.75\dv)--++(1*\dh,0)--++(0.5*\dh,-0.75\dv);
		\draw[line width=1](np)++(4*\dh+2*\s,-0.5\dv)--++(1*\dh,0)--++(0.5*\dh,0.5*\dv);
		\draw[line width=1](np)++(4*\dh+2*\s,-1.75\dv)--++(1*\dh,0)--++(0.5*\dh,1.75\dv);
		\draw[line width=1.5,white](np)++(4*\dh+2*\s,-1.75\dv)++(1*\dh,0)++(0.5*\dh*0.08,1.75\dv*0.08)--++(0.5*\dh*0.2,1.75\dv*0.2);

		\coordinate (m) at (4*\dh,1.75*\dv);
		\draw[line width=1,fill=white](m)--++(0,1.1*\s)--++(2.1*\s,-1.1*\s)--++(-2.1*\s,-1.1*\s)--cyclenode at(m)[right, xshift=5pt,yshift=11pt]{\small$h_{0}$};
		\coordinate (m) at (4*\dh,0.75*\dv);
		\draw[line width=1,fill=white](m)--++(0,1.1*\s)--++(2.1*\s,-1.1*\s)--++(-2.1*\s,-1.1*\s)--cyclenode at(m)[right, xshift=5pt,yshift=11pt]{\small$h_{L}$};
		\coordinate (m) at (4*\dh,-0.5*\dv);
		\draw[line width=1,fill=white](m)--++(0,1.1*\s)--++(2.1*\s,-1.1*\s)--++(-2.1*\s,-1.1*\s)--cyclenode at(m)[right, xshift=5pt,yshift=11pt]{\small$h_{iL}$};
		\node at (m) [yshift=0.97cm,xshift=0.5cm]{$\vdots$};
		\node at (m) [yshift=-0.4cm,xshift=0.5cm]{$\vdots$};
		\coordinate (m) at (4*\dh,-1.75*\dv);
		\draw[line width=1,fill=white](m)--++(0,1.1*\s)--++(2.1*\s,-1.1*\s)--++(-2.1*\s,-1.1*\s)--cyclenode at(m)[right, xshift=5pt,yshift=11pt]{\small$h_{(2M-1)L}$};	

		\draw[line width=1,fill,->](5.5*\dh+2*\s,0)--node[above]{\footnotesize$y_0(n)$}++(1.8*\dh,0);
		\draw[line width=1,white,fill](5.5*\dh+2*\s,0)circle(5.5pt)node[black]{\Large$\bigoplus$};
		


		\coordinate (m) at (7.3*\dh+3*\s,0);
		\draw[line width=1,fill=white](m)++(-\s,-\s)--++(2*\s,0)--++(0,2*\s)--++(-2*\s,0)--cycle node at(m)[xshift=-3.5pt]{\small$\uparrow$};
		\node at(m)[xshift=2.5pt]{\small$L$};
		\draw[line width=1](7.3*\dh+4*\s,0)node[below right]{\footnotesize$f_s'$}--++(1.9*\dh,0)--(10.5*\dh+2*\s,-7.2);

	\end{scope}

	% Zweite Abteilung	
	\begin{scope}[yshift=-4.6cm]

		\coordinate (np) at (0,0);
		\draw[line width=1](np)++(4*\dh+2*\s,1.75\dv)--++(1*\dh,0)--++(0.5*\dh,-1.75\dv);
		\draw[line width=1](np)++(4*\dh+2*\s,0.75\dv)--++(1*\dh,0)--++(0.5*\dh,-0.75\dv);
		\draw[line width=1](np)++(4*\dh+2*\s,-0.5\dv)--++(1*\dh,0)--++(0.5*\dh,0.5*\dv);
		\draw[line width=1](np)++(4*\dh+2*\s,-1.75\dv)--++(1*\dh,0)--++(0.5*\dh,1.75\dv);
		\draw[line width=1.5,white](np)++(4*\dh+2*\s,-1.75\dv)++(1*\dh,0)++(0.5*\dh*0.08,1.75\dv*0.08)--++(0.5*\dh*0.2,1.75\dv*0.2);

		\coordinate (m) at (4*\dh,1.75*\dv);
		\draw[line width=1,fill=white](m)--++(0,1.1*\s)--++(2.1*\s,-1.1*\s)--++(-2.1*\s,-1.1*\s)--cyclenode at(m)[right, xshift=5pt,yshift=11pt]{\small$h_{1}$};
		\coordinate (m) at (4*\dh,0.75*\dv);
		\draw[line width=1,fill=white](m)--++(0,1.1*\s)--++(2.1*\s,-1.1*\s)--++(-2.1*\s,-1.1*\s)--cyclenode at(m)[right, xshift=5pt,yshift=11pt]{\small$h_{L+1}$};
		\coordinate (m) at (4*\dh,-0.5*\dv);
		\draw[line width=1,fill=white](m)--++(0,1.1*\s)--++(2.1*\s,-1.1*\s)--++(-2.1*\s,-1.1*\s)--cyclenode at(m)[right, xshift=5pt,yshift=11pt]{\small$h_{iL+1}$};
		\node at (m) [yshift=0.97cm,xshift=0.5cm]{$\vdots$};
		\node at (m) [yshift=-0.4cm,xshift=0.5cm]{$\vdots$};
		\coordinate (m) at (4*\dh,-1.75*\dv);
		\draw[line width=1,fill=white](m)--++(0,1.1*\s)--++(2.1*\s,-1.1*\s)--++(-2.1*\s,-1.1*\s)--cyclenode at(m)[right, xshift=5pt,yshift=11pt]{\small$h_{(2M-1)L+1}$};	

		\draw[line width=1,fill,->](5.5*\dh+2*\s,0)--node[above]{\footnotesize$y_1(n)$}++(1.8*\dh,0);
		\draw[line width=1,white,fill](5.5*\dh+2*\s,0)circle(5.5pt)node[black]{\Large$\bigoplus$};
		


		\coordinate (m) at (7.3*\dh+3*\s,0);
		\draw[line width=1,fill=white](m)++(-\s,-\s)--++(2*\s,0)--++(0,2*\s)--++(-2*\s,0)--cycle node at(m)[xshift=-3.5pt]{\small$\uparrow$};
		\node at(m)[xshift=2.5pt]{\small$L$};
		\draw[line width=1](7.3*\dh+4*\s,0)node[below right]{\footnotesize$f_s'$}--++(1.8*\dh,0)--(10.5*\dh+2*\s,-7.2+4.6);

		\coordinate (m) at (8.8*\dh+3*\s,0);
		\draw[line width=1,fill=white](m)++(-\s,-\s)--++(2*\s,0)--++(0,2*\s)--++(-2*\s,0)--cycle node at(m){\small$\zeta^{\text{-}1}$};

	\end{scope}

	% Dritte Abteilung	
	\begin{scope}[yshift=-9.5cm]

		\coordinate (np) at (0,0);
		\draw[line width=1](np)++(4*\dh+2*\s,1.75\dv)--++(1*\dh,0)--++(0.5*\dh,-1.75\dv);
		\draw[line width=1](np)++(4*\dh+2*\s,0.75\dv)--++(1*\dh,0)--++(0.5*\dh,-0.75\dv);
		\draw[line width=1](np)++(4*\dh+2*\s,-0.5\dv)--++(1*\dh,0)--++(0.5*\dh,0.5*\dv);
		\draw[line width=1](np)++(4*\dh+2*\s,-1.75\dv)--++(1*\dh,0)--++(0.5*\dh,1.75\dv);
		\draw[line width=1.5,white](np)++(4*\dh+2*\s,-1.75\dv)++(1*\dh,0)++(0.5*\dh*0.08,1.75\dv*0.08)--++(0.5*\dh*0.2,1.75\dv*0.2);

		\coordinate (m) at (4*\dh,1.75*\dv);
		\draw[line width=1,fill=white](m)--++(0,1.1*\s)--++(2.1*\s,-1.1*\s)--++(-2.1*\s,-1.1*\s)--cyclenode at(m)[right, xshift=5pt,yshift=11pt]{\small$h_{j}$};
		\coordinate (m) at (4*\dh,0.75*\dv);
		\draw[line width=1,fill=white](m)--++(0,1.1*\s)--++(2.1*\s,-1.1*\s)--++(-2.1*\s,-1.1*\s)--cyclenode at(m)[right, xshift=5pt,yshift=11pt]{\small$h_{L+j}$};
		\coordinate (m) at (4*\dh,-0.5*\dv);
		\draw[line width=1,fill=white](m)--++(0,1.1*\s)--++(2.1*\s,-1.1*\s)--++(-2.1*\s,-1.1*\s)--cyclenode at(m)[right, xshift=5pt,yshift=11pt]{\small$h_{iL+j}$};
		\node at (m) [yshift=0.97cm,xshift=0.5cm]{$\vdots$};
		\node at (m) [yshift=-0.4cm,xshift=0.5cm]{$\vdots$};
		\coordinate (m) at (4*\dh,-1.75*\dv);
		\draw[line width=1,fill=white](m)--++(0,1.1*\s)--++(2.1*\s,-1.1*\s)--++(-2.1*\s,-1.1*\s)--cyclenode at(m)[right, xshift=5pt,yshift=11pt]{\small$h_{(2M-1)L+j}$};	

		\draw[line width=1,fill,->](5.5*\dh+2*\s,0)--node[above]{\footnotesize$y_j(n)$}++(1.8*\dh,0);
		\draw[line width=1,white,fill](5.5*\dh+2*\s,0)circle(5.5pt)node[black]{\Large$\bigoplus$};
		


		\coordinate (m) at (7.3*\dh+3*\s,0);
		\draw[line width=1,fill=white](m)++(-\s,-\s)--++(2*\s,0)--++(0,2*\s)--++(-2*\s,0)--cycle node at(m)[xshift=-3.5pt]{\small$\uparrow$};
		\node at(m)[xshift=2.5pt]{\small$L$};
		\draw[line width=1](7.3*\dh+4*\s,0)node[below right]{\footnotesize$f_s'$}--++(1.8*\dh,0)--(10.5*\dh+2*\s,-7.2+9.5);

		\coordinate (m) at (8.8*\dh+3*\s,0);
		\draw[line width=1,fill=white](m)++(-\s,-\s)--++(2*\s,0)--++(0,2*\s)--++(-2*\s,0)--cycle node at(m){\small$\zeta^{\text{-}j}$};

		\draw[line width=1,fill](5.5*\dh+2*\s,2.15)circle(1.25pt);
		\draw[line width=1,fill](5.5*\dh+2*\s,2.45)circle(1.25pt);
		\draw[line width=1,fill](5.5*\dh+2*\s,2.75)circle(1.25pt);
		\draw[line width=1,fill](5.5*\dh+2*\s,-2.15)circle(1.25pt);
		\draw[line width=1,fill](5.5*\dh+2*\s,-2.45)circle(1.25pt);
		\draw[line width=1,fill](5.5*\dh+2*\s,-2.75)circle(1.25pt);

	\end{scope}

	% Vierte Abteilung	
	\begin{scope}[yshift=-14.4cm]

		\coordinate (np) at (0,0);
		\draw[line width=1](np)++(4*\dh+2*\s,1.75\dv)--++(1*\dh,0)--++(0.5*\dh,-1.75\dv);
		\draw[line width=1](np)++(4*\dh+2*\s,0.75\dv)--++(1*\dh,0)--++(0.5*\dh,-0.75\dv);
		\draw[line width=1](np)++(4*\dh+2*\s,-0.5\dv)--++(1*\dh,0)--++(0.5*\dh,0.5*\dv);
		\draw[line width=1](np)++(4*\dh+2*\s,-1.75\dv)--++(1*\dh,0)--++(0.5*\dh,1.75\dv);

		\coordinate (m) at (4*\dh,1.75*\dv);
		\draw[line width=1,fill=white](m)--++(0,1.1*\s)--++(2.1*\s,-1.1*\s)--++(-2.1*\s,-1.1*\s)--cyclenode at(m)[right, xshift=5pt,yshift=11pt]{\small$h_{L-1}$};
		\coordinate (m) at (4*\dh,0.75*\dv);
		\draw[line width=1,fill=white](m)--++(0,1.1*\s)--++(2.1*\s,-1.1*\s)--++(-2.1*\s,-1.1*\s)--cyclenode at(m)[right, xshift=5pt,yshift=11pt]{\small$h_{2L-1}$};
		\coordinate (m) at (4*\dh,-0.5*\dv);
		\draw[line width=1,fill=white](m)--++(0,1.1*\s)--++(2.1*\s,-1.1*\s)--++(-2.1*\s,-1.1*\s)--cyclenode at(m)[right, xshift=5pt,yshift=11pt]{\small$h_{(i+1)L-1}$};
		\node at (m) [yshift=0.97cm,xshift=0.5cm]{$\vdots$};
		\node at (m) [yshift=-0.4cm,xshift=0.5cm]{$\vdots$};
		\coordinate (m) at (4*\dh,-1.75*\dv);
		\draw[line width=1,fill=white](m)--++(0,1.1*\s)--++(2.1*\s,-1.1*\s)--++(-2.1*\s,-1.1*\s)--cyclenode at(m)[right, xshift=5pt,yshift=11pt]{\small$h_{2ML-1}$};	


		\draw[line width=1,fill,->](5.5*\dh+2*\s,0)--++(1.8*\dh,0)node[above left]{\footnotesize$y_{L-1}(n)$};
		\draw[line width=1,white,fill](5.5*\dh+2*\s,0)circle(5.5pt)node[black]{\Large$\bigoplus$};


		\coordinate (m) at (7.3*\dh+3*\s,0);
		\draw[line width=1,fill=white](m)++(-\s,-\s)--++(2*\s,0)--++(0,2*\s)--++(-2*\s,0)--cycle node at(m)[xshift=-3.5pt]{\small$\uparrow$};
		\node at(m)[xshift=2.5pt]{\small$L$};
		\draw[line width=1](7.3*\dh+4*\s,0)node[below right,xshift=-2.5pt]{\footnotesize$f_s'$}--++(1.9*\dh,0)--(10.5*\dh+2*\s,-7.2+14.4);

		\coordinate (m) at (8.8*\dh+3*\s,0);
		\draw[line width=1,fill=white](m)++(-1.7*\s,-\s)--++(3.4*\s,0)--++(0,2*\s)--++(-3.4*\s,0)--cycle node at(m){\small$\zeta^{\text{-}(L\text{-}1)}$};

	\end{scope}


		\draw[line width=1,fill,->](10.5*\dh+2*\s,-7.2)--node[above]{\footnotesize$y_{up}(n')$}node[below]{\footnotesize$f_s'$}++(1.7*\dh,0);
		\draw[line width=1,white,fill](10.5*\dh+2*\s,-7.2)circle(5.5pt)node[black]{\Large$\bigoplus$};

\end{tikzpicture}
